
// Overseer Only

// Install Ansible
sudo apt install ansible

// Create ansible project folder where all the playbooks/roles etc will be created
mkdir ~/ansible

// Create the inventory file
nano ~/ansible/inventory

// Add nodes and groups
[masters]
master1
master2

[workers]
workerB
workerD
workerS
workerM

[all:children]
masters
workers

[lubuntu]
laptopName

// save and exit

// Create a group vars folder and yml file within
mkdir ~/ansible/group_vars
nano ~/ansible/group_vars/all.yml

// add the following
---
ansible_python_interpreter: /usr/bin/python3
ansible_user: chosen_admin_name

// save and exit

// check what is seen in the inventory file
ansible-inventory -i ~/ansible/inventory --list

// test
ansible -i ~/ansible/inventory all -m ping

// override ansible defaults
// create config file
nano ~/ansible.cfg

// Configure like this to tell ansible where to find the inventory file
[defaults]
INVENTORY = ~/ansible/inventory

[ssh_connection]
pipelining = True

// test ping, free memory and date sync from ~/
ansible all -m ping
ansible all -a "free -h"
ansible all -a "date"

// Install lints
sudo apt install yamllint
sudo apt install ansible-lint

// Create .yamllint file and add desired configurations
nano ~/ansible/.yamllint

// eg:
---
extends: default

rules:
  truthy:
    allowed-values:
      - 'true'
      - 'false'
      - 'yes'
      - 'no'

// save and exit

// lint usage (-c used to indicate where .yamllint config file is located)
// ideally should be set as an env var, but atm having trouble with getting them to persist on WSL
yamllint -c ~/ansible/.yamllint ~/ansible
ansible-lint ~/ansible
